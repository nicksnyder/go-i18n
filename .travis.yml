language: go

matrix:
  include:
    - go: 1.9.x
      env: GO111MODULE=on PKG='./...'
    - go: 1.12.x
      env: GO111MODULE=on PKG='./...' COVER='-coverprofile=coverage.txt -covermode=count'

install:
  - go get -t -v $PKG

script:
  - go test -race $COVER $PKG

after_success:
  - bash <(curl -s https://codecov.io/bash)
